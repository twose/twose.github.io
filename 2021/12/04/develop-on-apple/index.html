<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>在MacOS平台上进行C开发的一些经验（Apple M1） | TWO SEE | SEE is the sea of cc</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="PHP,macOS,m1,C">
    <meta name="description" content="前言最近把从2017年就开始用的13寸乞丐版MacBookPro淘汰了。它是我打从学习编程开始就一直在用的电脑，到现在也有四年了，多少有点感情，但它实在是太卡了，因此，我不得不……">
<meta property="og:type" content="article">
<meta property="og:title" content="在MacOS平台上进行C开发的一些经验（Apple M1）">
<meta property="og:url" content="http://www.twosee.cn/2021/12/04/develop-on-apple/index.html">
<meta property="og:site_name" content="TWO SEE">
<meta property="og:description" content="前言最近把从2017年就开始用的13寸乞丐版MacBookPro淘汰了。它是我打从学习编程开始就一直在用的电脑，到现在也有四年了，多少有点感情，但它实在是太卡了，因此，我不得不……">
<meta property="article:published_time" content="2021-12-04T13:50:12.000Z">
<meta property="article:modified_time" content="2021-12-04T16:15:17.897Z">
<meta property="article:author" content="Twosee">
<meta property="article:tag" content="PHP">
<meta property="article:tag" content="macOS">
<meta property="article:tag" content="m1">
<meta property="article:tag" content="C">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="TWO SEE" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="https://avatars2.githubusercontent.com/u/25978241?s=460&v=4">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Twosee</h5>
          <a href="mailto:twose@qq.com" title="twose@qq.com" class="mail">twose@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/twose" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/twoseee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">在MacOS平台上进行C开发的一些经验（Apple M1）</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">在MacOS平台上进行C开发的一些经验（Apple M1）</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-12-04T13:50:12.000Z" itemprop="datePublished" class="page-time">
  2021-12-04
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一波三折"><span class="post-toc-number">2.</span> <span class="post-toc-text">一波三折</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#以下是正文-或许"><span class="post-toc-number">3.</span> <span class="post-toc-text">以下是正文 (或许)</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#纯净迁移"><span class="post-toc-number">4.</span> <span class="post-toc-text">纯净迁移</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Homebrew"><span class="post-toc-number">5.</span> <span class="post-toc-text">Homebrew</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#All-in-MacOS-之-为啥不需要虚拟机了"><span class="post-toc-number">6.</span> <span class="post-toc-text">All in MacOS 之 为啥不需要虚拟机了</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#内存跟踪问题"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">内存跟踪问题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#系统调用跟踪问题"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">系统调用跟踪问题</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#编译性能"><span class="post-toc-number">7.</span> <span class="post-toc-text">编译性能</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Windows虚拟机下的游戏性能"><span class="post-toc-number">8.</span> <span class="post-toc-text">Windows虚拟机下的游戏性能</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#后话"><span class="post-toc-number">9.</span> <span class="post-toc-text">后话</span></a></li></ol>
        </nav>
    </aside>


<article id="post-develop-on-apple"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">在MacOS平台上进行C开发的一些经验（Apple M1）</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-12-04 21:50:12" datetime="2021-12-04T13:50:12.000Z"  itemprop="datePublished">2021-12-04</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近把从2017年就开始用的13寸乞丐版MacBookPro淘汰了。它是我打从学习编程开始就一直在用的电脑，到现在也有四年了，多少有点感情，但它实在是太卡了，因此，我不得不……<a id="more"></a></p>
<p>因为太卡了，放弃了eclipse转用vscode，但vscode的宏展开始终没有eclipse好用，不能无限层级往下展开，而是只能展开一层，对于看PHP内核或者PHP扩展这种宏孩儿少不了的代码来说不是很友好。 </p>
<p>因为太卡了，PhpStorm还得定期重启，键入代码有延迟，在PHP内核里checkout一个branch要花费甚至几分钟的时间，所以贡献也变少了… 有些patch写了以后也没提交。</p>
<p>因为太卡了，编译一次PHP可能得十来分钟，编译一次Swoole扩展得两三分钟，编译Swow和libcat稍微好一点，都是纯C项目，但如果是完全从头编译，也是分钟级的。</p>
<p>尤其是在虚拟机中编译，大概是文件系统慢的问题，make clean都要跑好一会，编译速度慢的那叫离谱他妈给离谱开门，离谱到家了。</p>
<p>那么为什么使用虚拟机呢？因为MacOS下无法使用valgrind，不能进行内存问题跟踪，没有strace，不能进行系统调用跟踪。</p>
<p>lldb倒是挺好用的，除了不支持source gdb脚本以外，几乎没有缺点，watchpoint功能也比gdb好用。</p>
<p>但是综上，很多时候问题都只能在Linux下调试，所以不得不上虚拟机。</p>
<h2 id="一波三折"><a href="#一波三折" class="headerlink" title="一波三折"></a>一波三折</h2><p>MacBook Pro 2021新款 带着 M1 Pro / Max横空出世，发布会当天因为一些事情累得不行，睡得很早，但是发布会开始的那个点，突然就从梦中惊醒，从床上垂死病中惊坐起，看完了发布会，感觉这新电脑真的是非常的amazing啊。而且我从19年开始一直在做等等党，本着永不言败的心态，结果输得彻彻底底，这次是非买不可了，第二天开始就一直蹲着等下单，然后第一时间购入了顶配，四年前是家里人赞助我买的，所以选择了最低配，但如今它已是我吃饭的家伙，性能就是生产力，这一次，顶配必须拿捏！</p>
<p>没想到，接下来竟是一个多月的苦等，64G全面缺货，大批订单延期，知乎上甚至还有一帮知友组了个维权群，加进去一看，受害者竟高达上百人……</p>
<p>期间公司还组织了团购，说是可能有85折优惠，听得我差点送去吸氧气瓶。</p>
<h2 id="以下是正文-或许"><a href="#以下是正文-或许" class="headerlink" title="以下是正文 (或许)"></a>以下是正文 (或许)</h2><p>一波三折还是到手了。</p>
<h2 id="纯净迁移"><a href="#纯净迁移" class="headerlink" title="纯净迁移"></a>纯净迁移</h2><p>首先，由于是intel转m1，x86转arm，所以用时间机器去转移老电脑的数据并不是一个明智的选择，而且原来的电脑积攒了四年的垃圾文件，有些初学时就深埋在我系统目录里的各种垃圾文件和奇怪配置也不好处理，所以我选择了重新捣鼓系统。</p>
<p>迁移比预想的要顺利很多，连起来算不到一天我就把所有东西都迁移完了，老电脑上看似不可或缺的东西很多，但其实常用的就那么一些。</p>
<p>顺便，有很多网站可以看M1上现在有哪些软件可用，哪些不可用，这里推荐一个：<a href="https://doesitarm.com/" target="_blank" rel="noopener">https://doesitarm.com/</a></p>
<p>目前我用到的除了luajit，没有不能用的，噢还有个pcre.jit，记得在编译PHP的时候用<code>--without-pcre-jit</code>选项关闭噢，不然会报warning，PHP内核本身的 <code>make install</code>里使用了PHP脚本，如果不关闭，安装都安装不了。</p>
<h2 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h2><p>homebrew在m1上的默认包安装路径从<code>/usr/local</code>变成了<code>/opt/homebrew</code>, blame了官方提交也没说是为什么，但README里说不按默认路径来可能会遇到奇怪的问题，所以还是老老实实转用<code>/opt/homebrew/</code>吧。</p>
<p>然后环境变量里需要配好多环境变量，那些C项目才能build起来，这里稍微分享下我当前的环境变量配置（放在<code>zshrc</code>里的）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">export PATH=<span class="string">"\</span></span><br><span class="line"><span class="string">$(brew --prefix openssl@1.1)/bin:\</span></span><br><span class="line"><span class="string">$(brew --prefix libiconv)/bin:\</span></span><br><span class="line"><span class="string">$(brew --prefix curl)/bin:\</span></span><br><span class="line"><span class="string">$(brew --prefix bison)/bin:\</span></span><br><span class="line"><span class="string">$PATH\</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line">export LDFLAGS=<span class="string">"$LDFLAGS \</span></span><br><span class="line"><span class="string">-L$(brew --prefix openssl@1.1)/lib \</span></span><br><span class="line"><span class="string">-L$(brew --prefix libiconv)/lib \</span></span><br><span class="line"><span class="string">-L$(brew --prefix curl)/lib \</span></span><br><span class="line"><span class="string">-L$(brew --prefix bison)/lib \</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line">export LIBS=<span class="string">"$LIBS -lssl -lcrypto"</span></span><br><span class="line"></span><br><span class="line">export CFLAGS=<span class="string">"$CFLAGS \</span></span><br><span class="line"><span class="string">-I$(brew --prefix openssl@1.1)/include \</span></span><br><span class="line"><span class="string">-I$(brew --prefix libiconv)/include \</span></span><br><span class="line"><span class="string">-I$(brew --prefix curl)/include \</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line">export CPPFLAGS=<span class="string">"$CPPFLAGS \</span></span><br><span class="line"><span class="string">-I$(brew --prefix openssl@1.1)/include \</span></span><br><span class="line"><span class="string">-I$(brew --prefix libiconv)/include \</span></span><br><span class="line"><span class="string">-I$(brew --prefix curl)/include \</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line">export PKG_CONFIG_PATH=<span class="string">"\</span></span><br><span class="line"><span class="string">$(brew --prefix openssl@1.1)/lib/pkgconfig:\</span></span><br><span class="line"><span class="string">$(brew --prefix curl)/lib/pkgconfig:\</span></span><br><span class="line"><span class="string">$PKG_COFNIG_PATH\</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line">export OPENSSL_ROOT_DIR=<span class="string">"$(brew --prefix openssl@1.1)"</span></span><br><span class="line">export OPENSSL_LIBS=<span class="string">"-L$(brew --prefix openssl@1.1)/lib"</span></span><br><span class="line">export OPENSSL_CFLAGS=<span class="string">"-I$(brew --prefix openssl@1.1)/include"</span></span><br></pre></td></tr></table></figure>

<p>我对于C构建系统也就是懂点皮毛，能写CMakeList和autoconf生态的m4，90%的构建问题都能自行解决但有时候也不知道原理是啥的那种程度，就我在m1构建C项目的体验上而言，我觉得对于完全不懂构建系统的小伙伴来说，想编译明白东西还是会挺痛苦的。</p>
<h2 id="All-in-MacOS-之-为啥不需要虚拟机了"><a href="#All-in-MacOS-之-为啥不需要虚拟机了" class="headerlink" title="All in MacOS 之 为啥不需要虚拟机了"></a>All in MacOS 之 为啥不需要虚拟机了</h2><p>我现在基本上all in macOS了，macOS成为了我的主力开发环境，没有虚拟机套娃肯定是性能最优的，但是调试的问题怎么解决呢。</p>
<h3 id="内存跟踪问题"><a href="#内存跟踪问题" class="headerlink" title="内存跟踪问题"></a>内存跟踪问题</h3><p>首先，我给PHP内核、Swow、libcat都加了ASan编译选项的支持，而且这玩意就算没有项目的编译选项支持，手动加个gcc编译参数也能搞定，ASan是个好东西，我觉得所有C/C++开发都需要深入了解下，包括它的原理。比较浅显的好处就是，ASan可以在几乎任何环境里跑，完美解决了macOS下对于内存问题跟踪的需求。</p>
<p>而且valgrind的性能比较捉急，有时候就难堪大用，它会使程序性能下降十倍以上，而有些对于时间、并发敏感的BUG，在valgrind下就复现不出来了，常常跟踪了个寂寞。而ASan在编译期就用了影子内存和hook一些内存函数的技巧，性能碾压valgrind。</p>
<h3 id="系统调用跟踪问题"><a href="#系统调用跟踪问题" class="headerlink" title="系统调用跟踪问题"></a>系统调用跟踪问题</h3><p>Intel的Mac开机时候按住command + R，而arm的Mac只需要开机时一直按住开机键，就能进到恢复模式。</p>
<p>进去以后菜单栏里打开终端，输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ csrutil disable</span><br><span class="line">$ csrutil enable --without debug --without dtrace</span><br></pre></td></tr></table></figure>

<p>先关掉SIP再打开，但是排除掉我们需要的部分。</p>
<p>需要注意的是有些系统版本好像是<code>--without dtruss</code>，但是m1上只有dtrace好使，但我们实际用的又是<code>dtruss</code>，非常莫名其妙。</p>
<p>可以用<code>csrutil status</code>查看结果，平时不在恢复模式也可以看：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ csrutil status</span><br><span class="line">System Integrity Protection status: unknown (Custom Configuration).</span><br><span class="line"></span><br><span class="line">Configuration:</span><br><span class="line">	Apple Internal: disabled</span><br><span class="line">	Kext Signing: enabled</span><br><span class="line">	Filesystem Protections: enabled</span><br><span class="line">	Debugging Restrictions: disabled</span><br><span class="line">	DTrace Restrictions: disabled</span><br><span class="line">	NVRAM Protections: enabled</span><br><span class="line">	BaseSystem Verification: enabled</span><br><span class="line">	Boot-arg Restrictions: enabled</span><br><span class="line">	Kernel Integrity Protections: disabled</span><br><span class="line">	Authenticated Root Requirement: enabled</span><br><span class="line"></span><br><span class="line">This is an unsupported configuration, likely to break in the future and leave your machine in an unknown state.</span><br></pre></td></tr></table></figure>

<p>虽然系统说好像自定义设置是unknown state，不过目前用下来没遇到啥问题。</p>
<p>毕竟都是个开发，有问题再想办法解决嘛。</p>
<p>然后我们就可以用<code>dtruss</code>来代替<code>strace</code>了。</p>
<p>此外，由于libcat是基于libuv的协程版libuv，所以不需要自己操心跨平台的问题，理论上一个系统下开发完了，各个系统都能跑。</p>
<p>当然，实际情况并不是100%这么理想的，还是会有那么一点边缘问题，但是我们有一大堆各种系统的CI去保证跨平台兼容性，甚至有什么龙芯、鲲鹏的机器（都是@dixyes搞的，我也不甚懂），似乎我们已经实现了好多个「第一个运行在XX平台的PHP协程库/框架」的成就，总之就是非常的牛啤。</p>
<h2 id="编译性能"><a href="#编译性能" class="headerlink" title="编译性能"></a>编译性能</h2><p>我习惯在编译的时候用<code>make &gt; /dev/null</code>，把标准输出重定向吃掉，这样就可以只看warning了，比较清爽。</p>
<p>然后，在新电脑上第一次编译的时候，我靠，就顿了一小会，就结束退出了，我还以为坏了，遇到M1上的BUG了，编译都闪退了……</p>
<p>结果是编译太快了，原来我要几分钟的编译，不到五秒秒就完成了……</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ time make -j8 &gt;&#x2F;dev&#x2F;null</span><br><span class="line">make -j8 &gt; &#x2F;dev&#x2F;null  11.13s user 15.77s system 614% cpu 4.375 total</span><br></pre></td></tr></table></figure>

<p>原来编译的时间太长，电脑还卡的啥也干不了，风扇锁7200转声音巨大无比，所以一般编译一下就看会手机，精力很分散。</p>
<p>而现在，几乎是所见即所得，哪怕是从头开始编译，也只需要几秒钟，编程体验极大提升。</p>
<p>而且所有IDE现在都是丝滑流畅，写起代码来不要太爽，感觉被封印了很久的写代码的激情又回来了。</p>
<h2 id="Windows虚拟机下的游戏性能"><a href="#Windows虚拟机下的游戏性能" class="headerlink" title="Windows虚拟机下的游戏性能"></a>Windows虚拟机下的游戏性能</h2><p>其实有自己的Windows电脑，肯定是不会在这台Mac上玩的，但是出于好奇和执念，还是试了试。</p>
<p>执念是因为毕业前回学校那段时间，只带了Mac本回去，几个月没打游戏，有点难受，就搞了个虚拟机玩了一会命运石之门，结果这都卡的不行，就很气人。</p>
<p>而新Mac还有120hz高刷屏，听说显卡性能也还不错，似乎可以一战。但是又由于架构问题，加上虚拟机，可能就好几层套娃，那个性能可能也是没眼看。</p>
<p>最终尝试的结果是，命运石之门这种文字冒险游戏肯定是丝滑流畅。斗胆试了下CSGO，1080p 200帧无压力，也是非常的amazing，但是实际匹配的时候会出现顿卡，但也没有很影响游戏体验，就是会突然从120掉到40帧那么零点几秒，感觉可能和虚拟机或者转译有关？但是正经人谁会在Mac上打CSGO呢…… 玩了一把以后卸载了，毕竟我这个Windows虚拟机可能未来还是要作为Win下构建调试项目的用途。</p>
<h2 id="后话"><a href="#后话" class="headerlink" title="后话"></a>后话</h2><p>其实写这篇文章就是体验一下新电脑的丝滑的，没有什么别的意思，内容也比较水，纯当练练打字，有好多M1上的经验点一时半会也想不起来了，后面想到了再补吧。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2021-12-04T16:15:17.897Z" itemprop="dateUpdated">2021-12-05 00:15:17</time>
</span><br>


        
        <a href="/2021/12/04/develop-on-apple/" target="_blank" rel="external">http://www.twosee.cn/2021/12/04/develop-on-apple/</a>
        
    </div>
    
    <footer>
        <a href="http://www.twosee.cn">
            <img src="https://avatars2.githubusercontent.com/u/25978241?s=460&v=4" alt="Twosee">
            Twosee
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/m1/" rel="tag">m1</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/" rel="tag">macOS</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.twosee.cn/2021/12/04/develop-on-apple/&title=《在MacOS平台上进行C开发的一些经验（Apple M1）》 — TWO SEE&pic=https://avatars2.githubusercontent.com/u/25978241?s=460&v=4" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.twosee.cn/2021/12/04/develop-on-apple/&title=《在MacOS平台上进行C开发的一些经验（Apple M1）》 — TWO SEE&source=前言最近把从2017年就开始用的13寸乞丐版MacBookPro淘汰了。它是我打从学习编程开始就一直在用的电脑，到现在也有四年了，多少有点感情，但它实在是..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.twosee.cn/2021/12/04/develop-on-apple/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《在MacOS平台上进行C开发的一些经验（Apple M1）》 — TWO SEE&url=http://www.twosee.cn/2021/12/04/develop-on-apple/&via=http://www.twosee.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.twosee.cn/2021/12/04/develop-on-apple/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="/2021/07/20/zhihu-sea-king/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">多路复用一样会阻塞用户线程，那它和同步阻塞有什么区别？</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "BjOaCSsEoD25PlY0akiSOjLV-gzGzoHsz",
            appKey: "vz7DaO87fpAiBNIJAJmcqGm0",
            avatar: "mm",
            placeholder: "Just go go",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->










</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license noopener" href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Twosee &copy; 2003 - 2022</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.twosee.cn/2021/12/04/develop-on-apple/&title=《在MacOS平台上进行C开发的一些经验（Apple M1）》 — TWO SEE&pic=https://avatars2.githubusercontent.com/u/25978241?s=460&v=4" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.twosee.cn/2021/12/04/develop-on-apple/&title=《在MacOS平台上进行C开发的一些经验（Apple M1）》 — TWO SEE&source=前言最近把从2017年就开始用的13寸乞丐版MacBookPro淘汰了。它是我打从学习编程开始就一直在用的电脑，到现在也有四年了，多少有点感情，但它实在是..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.twosee.cn/2021/12/04/develop-on-apple/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《在MacOS平台上进行C开发的一些经验（Apple M1）》 — TWO SEE&url=http://www.twosee.cn/2021/12/04/develop-on-apple/&via=http://www.twosee.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.twosee.cn/2021/12/04/develop-on-apple/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIElEQVR42u3aS27DMAwFwNz/0um2QGDnkVQLWBqtgsCONFkQ/Oj1itf71/r8/urz58rfev3FwsDAeCzjfbvyDarUHHz/DAYGxjmMq2PdP1MNvslbyb4YGBgYybGSgHgfgu9/BwMDA2MecKtbJs9jYGBg3DN6DbJyqdkKuItrcQwMjAcy8q77/3/+k/kGBgbGoxjv4po096t/U+FUGBgYWzOq21Sb+/PUsHAeDAyMTRnz0Flt/VebaMkFDgwMjBMY1aKxGhbzhlpvkICBgXECY9nPjZO85mgBAwPjAMaq2UJesiaDgcJbGBgYxzB6hWVSrCbf5M9HMRsDA2M7RrUErYbdPLBWd7wcDGBgYGzH6G2zNoBGA4BeEYuBgfFwRn6g6gCgl4zmY87LXTAwMLZjVMcAvcDaC9Z5uomBgXECI0/dkrA4CaPVUP4lw8XAwNiCMblmkbfDVgXxKD/FwMDYjjFp089HmPlY4sv3GBgYWzOq7bNq+77aYlu1IwYGxn6M+YWwakidYC7LWgwMjGMYk2sQ0WZxoM9DOQYGxjmMPFBOStBmRzA5JwYGxqaMd3FVxwm9a17VcQIGBsbejF6wq16/mATrZXNaDAyMhzPyJtqkoTa5L4GBgYGRHCVvhPUuavRachgYGBjVRLBa6PZSzMJUAQMD42DGqqJ0csLFqSEGBsZDGL3LXvnwYO1QEwMD4zTGqHQcZGvzo2NgYBzA+AHa9XRy+8UlgwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
